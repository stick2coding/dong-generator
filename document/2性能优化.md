## 优化思路

性能优化一般分为两类

1、通用优化。

一些适用性比较广泛的优化策略，例如增加并发、使用缓存、负载均衡，同步转异步、查询优化等

2、具体问题具体分析

通过监控性能工具、压力测试等方法，找到系统的瓶颈，然后再取对应的策略进行优化


### 通用优化手段

用户在前台的操作，需要经过 前台、网关、后端请求层、业务逻辑层、中间件、存储层 等节点

每个节点其实都有一些通用化的优化策略

#### 前端：

1、离线缓存。有些数据在请求一次后可以缓存在前端，避免重复请求查询。
2、请求合并。将多个小请求合并成一个大请求，减少网络开销。（视情况来定）
3、懒加载。延迟加载一些比较耗时的内容，比如优先文字，后加载图片。

#### 网关

1、负载均衡。当后端服务分布式部署时，通过负载均衡将请求分摊给服务器，增加并发量
2、缓存。同样的道理，缓存可以缓存的数据，下次查询可以省略后面的流程。

#### 请求层

1、服务器优化。
2、微服务。将大型服务进行拆分，通过网关进行服务分发，增加每个服务的并发能力

#### 业务逻辑层

1、同步转异步。避免阻塞线程，通过异步的方式处理一些耗时操作。
2、多线程。通过多线程实现业务的并发处理

#### 中间件

1、缓存。引入redis、caffeine等缓存中间件，将一些数据缓存到内存中，减少数据库的访问。
2、队列。使用队列对系统进行解耦，削峰填谷、操作异步化

#### 数据库

1、分库分表。通过对数据库进行垂直或水平拆分来减少单表数据量，提高查询效率
2、sql优化。慢sql分析，索引优化
3、数据清理。定期清理无用数据，减少存储压力，或者将数据进行备份转储

